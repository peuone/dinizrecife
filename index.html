<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√ìticas Diniz - Central de Atendimento</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #c4161c;
            --secondary-color: #FFFFFF;
            --hover-color: #a01217;
            --back-color: #6C757D;
            --text-color: #333333;
            --background-color: #F4F4F4;
            --white-text: #FFFFFF;
            --premium-color: #FFD700;
            --resina-color: #4CAF50;
            --policarbonato-color: #2196F3;
            --alto-indice-color: #9C27B0;
            --zeiss-blue: #0082C3;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header img {
            max-width: 200px;
            height: auto;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .option-card {
            background: var(--secondary-color);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
            border-left: 5px solid var(--primary-color);
            text-decoration: none;
            color: var(--text-color);
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .option-card img {
            width: 100%;
            max-width: 150px;
            height: auto;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .option-card h4 {
            margin: 10px 0;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        .option-card p {
            font-size: 0.9em;
            color: var(--text-color);
            line-height: 1.4;
            text-align: left;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-right: 5px;
            font-weight: bold;
        }

        .resina-badge {
            background-color: var(--resina-color);
            color: white;
        }

        .policarbonato-badge {
            background-color: var(--policarbonato-color);
            color: white;
        }

        .alto-indice-badge {
            background-color: var(--alto-indice-color);
            color: white;
        }

        .zeiss-badge {
            background-color: var(--zeiss-blue);
            color: white;
        }

        .navigation-buttons {
            text-align: center;
            margin-top: 30px;
        }

        button {
            background-color: var(--primary-color);
            color: var(--white-text);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
            font-family: 'Open Sans', sans-serif;
            font-size: 1em;
        }

        .back-button {
            background-color: var(--back-color) !important;
        }

        button:hover {
            background-color: var(--hover-color);
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        .whatsapp-button {
            background-color: #25D366;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
            font-size: 1.1em;
            transition: background-color 0.3s;
        }

        .whatsapp-button:hover {
            background-color: #128C7E;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: var(--text-color);
            font-size: 0.9em;
        }

        .welcome-step {
            text-align: center;
        }

        .welcome-step input {
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
            width: 80%;
            max-width: 300px;
        }

        .observations {
            margin-top: 20px;
        }

        .observations textarea {
            width: 100%;
            max-width: 500px;
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            resize: vertical;
            min-height: 100px;
        }

        .lojas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .loja-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .loja-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            border-color: var(--primary-color);
        }

        .loja-card.selected {
            border-color: var(--primary-color);
            background-color: #fff0f0;
        }

        .loja-card img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            margin-bottom: 10px;
        }

        .loja-card h4 {
            margin: 5px 0;
            color: var(--primary-color);
        }

        .loja-card p {
            margin: 5px 0;
            font-size: 0.8em;
            color: var(--text-color);
        }
        
        .badge-container {
    position: relative;
    display: inline-block;
    width: 100%;
        }
        
        .badge-container .badge {
    position: absolute;
    top: 0px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 2;
    font-size: 0.9em;
    padding: 4px 10px;
        }
        
        .option-card img {
    margin-top: 10px;
    position: relative;
    z-index: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- P√°gina inicial estilo Linktree -->
        <div id="home-step" class="step active">
            <div class="header">
                <img src="https://github.com/user-attachments/assets/e352ef86-5b03-444d-adc0-8f83017dc053" alt="Logo √ìticas Diniz">
                <h2>Central de Atendimento</h2>
                <p>Selecione a loja mais pr√≥xima ou inicie seu atendimento</p>
            </div>

            <div class="options-grid">
                <div class="option-card" onclick="navigateTo('welcome-step')">
                    <h4>Consulta/Assistente</h4>
                </div>
                
                <a href="https://wa.me/558198764207" class="option-card" target="_blank">
                    <h4>Shopping Recife</h4>
                </a>

                <a href="https://wa.me/558182770159" class="option-card" target="_blank">
                    <h4>Shopping Rio Mar</h4>
                </a>

                <a href="https://wa.me/558181422344" class="option-card" target="_blank">
                    <h4>Shopping Tacaruna</h4>
                </a>

                <a href="https://wa.me/558183020002" class="option-card" target="_blank">
                    <h4>Shopping Boa Vista</h4>
                </a>

                <a href="https://wa.me/558198764205" class="option-card" target="_blank">
                    <h4>Shopping Guararapes</h4>
                </a>

                <a href="https://wa.me/558185860948" class="option-card" target="_blank">
                    <h4>Mix Matheus Boa Viagem</h4>
                </a>

                <a href="https://wa.me/558187270002" class="option-card" target="_blank">
                    <h4>Mix Matheus Casa Forte</h4>
                </a>

            </div>
        </div>

        <!-- P√°gina inicial do assistente -->
        <div id="welcome-step" class="step">
            <div class="header">
                <img src="https://github.com/user-attachments/assets/e352ef86-5b03-444d-adc0-8f83017dc053" alt="Logo √ìticas Diniz">
                <h3>Bem-vindo ao Assistente Diniz</h3>
            </div>
            
            <div class="welcome-step">
                <input type="text" id="client-name" placeholder="Digite o nome do cliente">
                <div class="navigation-buttons">
                    <button onclick="startAtendimento()">Iniciar Atendimento</button>
                    <button class="back-button" onclick="navigateTo('home-step')">Voltar</button>
                </div>
            </div>
        </div>

        <!-- Passos da navega√ß√£o -->
        <div id="step1" class="step"></div> <!-- Receita m√©dica -->
        <div id="step2" class="step"></div> <!-- Agendar consulta -->
        <div id="step3" class="step"></div> <!-- Categoria de lentes -->
        <div id="step4" class="step"></div> <!-- Tipo de lente -->
        <div id="step5" class="step"></div> <!-- Vers√£o ou Categoria Bifocal -->
        <div id="step6" class="step"></div> <!-- √çndice de refra√ß√£o -->
        <div id="step7" class="step"></div> <!-- Fotossens√≠vel -->
        <div id="summary" class="step summary"></div> <!-- Resumo -->
    </div>

    <div class="campaign-banner" style="text-align: center; margin: 20px 0;">
    <img src="pictures/campanha.gif" alt="Promo√ß√£o Especial" style="width: 100%; max-width: 600px; border-radius: 10px;">
</div>
    <div class="content">

<div class="footer">
    <footer style="text-align: center; padding: 10px; background-color: #f4f4f4; font-size: 14px;">
        <p>üöß Em desenvolvimento por <strong>Pedro Rodrigues</strong> </p>
        <p>üì© Sugest√µes? Me chama no WhatsApp: <a href="https://wa.me/5581997665895" target="_blank">+55 81 99766-5895</a></p>
    </footer>
</div>

    <script>
        const options = {
            'visao-simples': {
                types: [
                    { name: 'Convencional', img: 'pictures/vsconvencional.png', desc: 'Lentes tradicionais com tecnologia b√°sica para corre√ß√£o de problemas de vis√£o.' },
                    { name: 'Digital', img: 'pictures/vsdigital.png', desc: 'Lentes com design digital para maior precis√£o e conforto visual.' },
                    { name: 'Freeform', img: 'pictures/vsfreeform.png', desc: 'Lentes personalizadas com tecnologia avan√ßada para m√°xima performance visual.' }
                ],
                versions: [
                    { name: 'Zeiss Myocare', img: 'pictures/zeiss-myocare.png', desc: 'Tecnologia exclusiva para controle da miopia em crian√ßas e adolescentes, com efic√°cia comprovada.' },
                    { name: 'Zeiss Kids', img: 'pictures/zeiss-kids.png', desc: 'Lentes ultra-resistentes e seguras, desenvolvidas especialmente para o estilo de vida ativo das crian√ßas.' },
                    { name: 'Zeiss SmartLife Young', img: 'pictures/zeiss-smartlife-young.png', desc: 'Prote√ß√£o digital avan√ßada para jovens conectados, reduzindo a fadiga ocular.' },
                    { name: 'Zeiss Minerais', img: 'pictures/zeiss-minerais.png', desc: 'Lentes minerais de alta qualidade √≥ptica com excelente resist√™ncia a arranh√µes.' },
                    { name: 'Zeiss Light 2', img: 'pictures/zeiss-light2.png', desc: 'Tecnologia de ponta para lentes extremamente finas e leves, com m√°xima precis√£o.' },
                    { name: 'Zeiss SmartLife', img: 'pictures/zeiss-smartlife.png', desc: 'Solu√ß√£o completa para o estilo de vida digital moderno, com prote√ß√£o contra luz azul.' },
                    { name: 'VS Zeiss SmartLife Individual 3', img: 'pictures/zeiss-smartlife-individual.png', desc: 'Personaliza√ß√£o m√°xima para necessidades visuais espec√≠ficas e alta performance em vis√£o simples.' },
                    { name: 'Lente Pronta Zeiss ClearView', img: 'pictures/zeiss-clearview.png', desc: 'Lentes prontas com qualidade Zeiss para entrega r√°pida e excelente desempenho visual.' },
                    { name: 'Lente Pronta Myocare', img: 'pictures/myocare-pronta.png', desc: 'Solu√ß√£o pronta para controle da miopia em crian√ßas, com tecnologia comprovada.' }
                ],
                fotossensivel: ['Sim', 'N√£o'],
                antirreflexo: {
                    'Convencional': ['Sem Antirreflexo', 'Anti Reflexo Verde', 'Anti Reflexo Azul', 'Colora√ß√£o'],
                    'Digital': ['Sem Antirreflexo', 'Anti Reflexo Verde', 'Anti Reflexo Azul', 'Colora√ß√£o'],
                    'Freeform': ['Sem Antirreflexo', 'Duravision Chrome', 'Duravision Silver', 'Duravision Platinum', 'Colora√ß√£o'],
                    'Lente Pronta Myocare': ['Duravision Platinum'],
                    'Lente Pronta Zeiss ClearView': ['Duravision Chrome', 'Duravision Silver', 'Duravision Platinum'],
                    'Zeiss Myocare': ['Duravision Platinum'],
                    'Zeiss Kids': ['Duravision Platinum']
                }
            },
            'multifocais': {
                types: [
                    { name: 'Convencional', img: 'pictures/convencional.png', desc: 'Lentes multifocais tradicionais para vis√£o em todas as dist√¢ncias.' },
                    { name: 'Digital', img: 'pictures/digital.png', desc: 'Multifocais com design digital para transi√ß√£o suave entre os campos visuais.' },
                    { name: 'Freeform', img: 'pictures/freeform.png', desc: 'Multifocais personalizadas com tecnologia avan√ßada para adapta√ß√£o r√°pida.' }
                ],
                versions: [
                    { name: 'Zeiss GT2', img: 'pictures/zeiss-gt2.png', desc: 'Conforto visual b√°sico com tecnologia Zeiss para necessidades multifocais simples.' },
                    { name: 'Zeiss Light', img: 'pictures/zeiss-light.png', desc: 'Lentes leves com f√°cil adapta√ß√£o e campos visuais equilibrados.' },
                    { name: 'Zeiss Light 2 D', img: 'pictures/zeiss-light2d.png', desc: 'Vers√£o digital com melhor distribui√ß√£o de campos visuais.' },
                    { name: 'Zeiss Light 2 3D', img: 'pictures/zeiss-light2-3d.png', desc: 'Tecnologia 3D para melhor percep√ß√£o de profundidade e conforto visual.' },
                    { name: 'Zeiss Choice', img: 'pictures/zeiss-choice.png', desc: 'Solu√ß√£o balanceada para diversos estilos de vida e necessidades visuais.' },
                    { name: 'Zeiss Light 2 3DV', img: 'pictures/zeiss-light2-3dv.png', desc: 'Vers√£o premium com tecnologia 3D avan√ßada para m√°xima performance.' },
                    { name: 'Zeiss SmartLife Essencial', img: 'pictures/zeiss-smartlife-essencial.png', desc: 'Para necessidades visuais b√°sicas no mundo digital.' },
                    { name: 'Zeiss SmartLife Pure', img: 'pictures/zeiss-smartlife-pure.png', desc: 'Prote√ß√£o especializada contra luz azul nociva de dispositivos digitais.' },
                    { name: 'Zeiss SmartLife Plus', img: 'pictures/zeiss-smartlife-plus.png', desc: 'Performance visual aprimorada para usu√°rios intensivos de tecnologia.' },
                    { name: 'Zeiss SmartLife Superb', img: 'pictures/zeiss-smartlife-superb.png', desc: 'Alta performance visual para profissionais que exigem o m√°ximo.' },
                    { name: 'Zeiss SmartLife Individual 3', img: 'pictures/zeiss-smartlife-individual.png', desc: 'Solu√ß√£o personalizada m√°xima para vis√£o digital e multifocal.' }
                ],
                fotossensivel: ['Sim', 'N√£o'],
                antirreflexo: {
                    'Convencional': ['Sem Antirreflexo', 'Anti Reflexo Verde', 'Anti Reflexo Azul', 'Colora√ß√£o'],
                    'Digital': ['Sem Antirreflexo', 'Anti Reflexo Verde', 'Anti Reflexo Azul', 'Colora√ß√£o'],
                    'Freeform': ['Sem Antirreflexo', 'Duravision Chrome', 'Duravision Silver', 'Duravision Platinum', 'Colora√ß√£o']
                }
            },
            'bifocais': {
                types: [
                    { name: 'Convencional', img: 'pictures/vsconvencional.png', desc: 'Lentes bifocais tradicionais com transi√ß√£o vis√≠vel para perto e longe.' },
                    { name: 'Digital', img: 'pictures/vsdigital.png', desc: 'Bifocais com design digital para transi√ß√£o mais suave entre os campos.' },
                    { name: 'Freeform', img: 'pictures/vsfreeform.png', desc: 'Bifocais personalizadas com tecnologia avan√ßada para melhor adapta√ß√£o.' }
                ],
                categories: ['Ultex', 'Panoptik', 'Kriptok', 'Executive'],
                fotossensivel: ['Sim', 'N√£o'],
                antirreflexo: ['Sem Antirreflexo', 'Anti Reflexo Verde', 'Anti Reflexo Azul', 'Colora√ß√£o']
            },
            'indice-refracao': [
                { 
                    name: 'Resinas Padr√£o (1.49, 1.50 e 1.56)', 
                    img: 'pictures/resina-padrao.png',
                    desc: 'Melhor custo-benef√≠cio, indicado para graus baixos (at√© ¬±3.00) e arma√ß√µes menores.<br><br>‚úÖ Boa qualidade √≥ptica<br>‚úÖ Maior espessura em compara√ß√£o com √≠ndices mais altos<br>‚úÖ Opcionais de tratamento antirreflexo e prote√ß√£o UV',
                    badgeClass: 'resina-badge'
                },
                { 
                    name: 'Policarbonato (1.59)', 
                    img: 'pictures/policarbonato.png',
                    desc: 'Ideal para crian√ßas, esportes e uso di√°rio com mais resist√™ncia.<br><br>‚úÖ Alta resist√™ncia a impactos (mais seguro)<br>‚úÖ Lente leve e confort√°vel<br>‚úÖ Prote√ß√£o UV integrada',
                    badgeClass: 'policarbonato-badge'
                },
                { 
                    name: 'Resinas de Alto √çndice (1.60, 1.61, 1.67, 1.74)', 
                    img: 'pictures/alto-indice.png',
                    desc: 'Recomendado para graus m√©dios a altos (acima de ¬±3.00), proporcionando mais est√©tica e conforto.<br><br>‚úÖ Lentes mais finas e leves<br>‚úÖ Melhor op√ß√£o para arma√ß√µes maiores<br>‚úÖ Prote√ß√£o UV integrada',
                    badgeClass: 'alto-indice-badge'
                },
                { 
                    name: 'Obter Sugest√£o da Loja', 
                    img: 'pictures/sugestao-loja.png',
                    desc: 'N√£o tem certeza sobre a melhor op√ß√£o? Nossa equipe pode recomendar a lente ideal com base no seu grau e arma√ß√£o!<br><br>‚úÖ Avalia√ß√£o personalizada<br>‚úÖ Melhor equil√≠brio entre est√©tica e custo<br>‚úÖ Escolha segura e recomendada por especialistas',
                    badgeClass: ''
                }
            ]
        };

        // Lista de lojas
        const lojas = [
            { nome: 'Shopping Recife', whatsapp: '8198764207', img: 'pictures/shopping-recife.png' },
            { nome: 'Shopping Rio Mar', whatsapp: '8182770159', img: 'pictures/rio-mar.png' },
            { nome: 'Shopping Tacaruna', whatsapp: '8181422344', img: 'pictures/tacaruna.png' },
            { nome: 'Shopping Boa Vista', whatsapp: '8183020002', img: 'pictures/boa-vista.png' },
            { nome: 'Shopping Guararapes', whatsapp: '8198764205', img: 'pictures/guararapes.png' },
            { nome: 'Mix Matheus Boa Viagem', whatsapp: '8185860948', img: 'pictures/matheus-bv.png' },
            { nome: 'Mix Matheus Casa Forte', whatsapp: '8187270002', img: 'pictures/matheus-cf.png' }
        ];

        let currentSelection = {
            category: '',
            type: '',
            versao: '',
            indiceRefracao: '',
            fotossensivel: '',
            antirreflexo: '',
            bifocalCategory: '',
            clientName: '',
            receitaMedica: '',
            selectedLoja: null
        };

        let currentStepHistory = ['home-step'];

        function navigateTo(stepId, fromHistory = false) {
            if (!fromHistory) currentStepHistory.push(stepId);
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.getElementById(stepId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function goBack() {
            if (currentStepHistory.length > 1) {
                currentStepHistory.pop();
                const prevStep = currentStepHistory[currentStepHistory.length - 1];
                navigateTo(prevStep, true);
            }
        }

        function startAtendimento() {
            const clientName = document.getElementById('client-name').value;
            if (!clientName) {
                alert('Por favor, insira o nome do cliente.');
                return;
            }
            currentSelection.clientName = clientName;
            showReceitaMedicaStep();
        }

        function showReceitaMedicaStep() {
            const step = document.getElementById('step1');
            step.innerHTML = `
                <h3>Voc√™ tem receita m√©dica?</h3>
                <div class="options-grid">
                    <div class="option-card" onclick="selectReceitaMedica('Sim')">
                        <h4>Sim, tenho receita.</h4>
                        <p>Quero prosseguir com o assistente de lentes.</p>
                    </div>
                    <div class="option-card" onclick="selectReceitaMedica('N√£o')">
                        <h4>N√£o tenho receita m√©dica.</h4>
                        <p>Gostaria de agendar uma consulta.</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step1');
        }

        function selectReceitaMedica(opt) {
            currentSelection.receitaMedica = opt;
            if (opt === 'Sim') {
                showCategorySelection();
            } else {
                showAgendarConsultaStep();
            }
        }

        function showAgendarConsultaStep() {
            const step = document.getElementById('step2');
            step.innerHTML = `
                <h3>Quer enviar para a loja sua sugest√£o de lentes?</h3>
                <div class="options-grid">
                    <div class="option-card" onclick="selectEnviarSugestao('Sim')">
                        <h4>Sim</h4>
                        <p>Quero enviar minha sugest√£o de lentes.</p>
                    </div>
                    <div class="option-card" onclick="selectEnviarSugestao('N√£o')">
                        <h4>N√£o</h4>
                        <p>Quero apenas agendar uma consulta.</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step2');
        }

        function selectEnviarSugestao(opt) {
            if (opt === 'Sim') {
                showCategorySelection();
            } else {
                showAgendamentoConsulta();
            }
        }

        function showAgendamentoConsulta() {
            const summary = document.getElementById('summary');
            const whatsappMessage = `Ol√°, gostaria de agendar uma consulta. Cliente: ${currentSelection.clientName}`;
            
            // Mostrar sele√ß√£o de loja para agendamento
            summary.innerHTML = `
                <h3>Selecione a Loja para Agendamento:</h3>
                <div class="lojas-grid" id="lojas-container">
                    ${lojas.map(loja => `
                        <div class="loja-card" onclick="selectLoja(${lojas.indexOf(loja)})">
                            <img src="${loja.img}" alt="${loja.nome}">
                            <h4>${loja.nome}</h4>
                            <p>Clique para selecionar</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
                <div id="whatsapp-button-container" style="display: none; text-align: center; margin-top: 20px;">
                    <a href="#" class="whatsapp-button" target="_blank" id="whatsapp-link">Agendar Consulta</a>
                </div>
            `;
            
            navigateTo('summary');
        }

        function selectLoja(index) {
            currentSelection.selectedLoja = lojas[index];
            
            // Remover sele√ß√£o de todas as lojas
            document.querySelectorAll('.loja-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Adicionar sele√ß√£o √† loja escolhida
            document.querySelectorAll('.loja-card')[index].classList.add('selected');
            
            // Atualizar link do WhatsApp
            const whatsappLink = `https://wa.me/55${currentSelection.selectedLoja.whatsapp}?text=${encodeURIComponent(whatsappMessage)}`;
            
            document.getElementById('whatsapp-link').href = whatsappLink;
            document.getElementById('whatsapp-button-container').style.display = 'block';
        }

        function showCategorySelection() {
            const step3 = document.getElementById('step3');
            step3.innerHTML = `
                <h3>Selecione o Tipo de Lente:</h3>
                <div class="options-grid">
                    <div class="option-card" onclick="selectCategory('visao-simples')">
                        <img src="pictures/visao simples 2.png" alt="Vis√£o Simples">
                        <h4>Vis√£o Simples</h4>
                        <p>Lentes para corre√ß√£o de problemas de vis√£o de perto ou longe.</p>
                    </div>
                    <div class="option-card" onclick="selectCategory('multifocais')">
                        <img src="pictures/MULTIFOCAL2.png" alt="Multifocais">
                        <h4>Multifocais</h4>
                        <p>Lentes que corrigem vis√£o de perto, intermedi√°ria e longe.</p>
                    </div>
                    <div class="option-card" onclick="selectCategory('bifocais')">
                        <img src="pictures/bifocal2.png" alt="Bifocais">
                        <h4>Bifocais</h4>
                        <p>Lentes com duas √°reas de vis√£o: perto e longe.</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step3');
        }

        function selectCategory(category) {
            currentSelection.category = category;
            showTypeSelection();
        }

        function showTypeSelection() {
            const step4 = document.getElementById('step4');
            const categoryData = options[currentSelection.category];
            step4.innerHTML = `
                <h3>Selecione o Tipo de ${currentSelection.category.replace('-', ' ').toUpperCase()}:</h3>
                <div class="options-grid">
                    ${categoryData.types.map(type => `
                        <div class="option-card" onclick="selectType('${type.name}')">
                            <img src="${type.img}" alt="${type.name}">
                            <h4>${type.name}</h4>
                            <p>${type.desc}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step4');
        }

        function selectType(type) {
            currentSelection.type = type;
            if ((currentSelection.category === 'multifocais' || currentSelection.category === 'visao-simples') && type === 'Freeform') {
                showVersionSelection();
            } else if (currentSelection.category === 'bifocais') {
                showBifocalCategorySelection();
            } else {
                showIndiceRefracaoSelection();
            }
        }

        function showVersionSelection() {
            const step5 = document.getElementById('step5');
            let versions = currentSelection.category === 'multifocais' ? 
                options.multifocais.versions : options['visao-simples'].versions;
            
            // Remover Zeiss Light das lentes Multifocais Freeform
            if (currentSelection.category === 'multifocais' && currentSelection.type === 'Freeform') {
                versions = versions.filter(v => v.name !== 'Zeiss Light');
            }
                
            step5.innerHTML = `
                <h3>Selecione a Vers√£o ${currentSelection.type}:</h3>
                <div class="options-grid">
                    ${versions.map(version => `
                        <div class="option-card" onclick="selectVersion('${version.name}')">
                            <img src="${version.img}" alt="${version.name}">
                            <h4>${version.name}</h4>
                            <p>${version.desc}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step5');
        }

        function selectVersion(version) {
            currentSelection.versao = version;
            showIndiceRefracaoSelection();
        }

        function showBifocalCategorySelection() {
            const step5 = document.getElementById('step5');
            step5.innerHTML = `
                <h3>Selecione a Categoria de Bifocais:</h3>
                <div class="options-grid">
                    ${options.bifocais.categories.map(category => `
                        <div class="option-card" onclick="selectBifocalCategory('${category}')">
                            <img src="pictures/${category.toLowerCase()}.png" alt="${category}">
                            <h4>${category}</h4>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step5');
        }

        function selectBifocalCategory(category) {
            currentSelection.bifocalCategory = category;
            showIndiceRefracaoSelection();
        }

        function showIndiceRefracaoSelection() {
            const step6 = document.getElementById('step6');
            
            // Se for Myocare Pronta, mostrar apenas Poli
            if (currentSelection.versao === 'Lente Pronta Myocare') {
                const poliOption = options['indice-refracao'].find(item => item.name.includes('Policarbonato'));
                
                step6.innerHTML = `
                    <h3>√çndice de Refra√ß√£o para Myocare Pronta:</h3>
                    <div class="options-grid">
                        <div class="option-card" onclick="selectIndiceRefracao('${poliOption.name}')">
                            <span class="badge ${poliOption.badgeClass}">${poliOption.name.split(' ')[0]}</span>
                            <img src="${poliOption.img}" alt="${poliOption.name}">
                            <h4>${poliOption.name}</h4>
                            <p>${poliOption.desc}</p>
                        </div>
                    </div>
                    <div class="navigation-buttons">
                        <button class="back-button" onclick="goBack()">Voltar</button>
                    </div>
                `;
            } 
            // Se for Zeiss Kids, mostrar apenas Poli
            else if (currentSelection.versao === 'Zeiss Kids') {
                const poliOption = options['indice-refracao'].find(item => item.name.includes('Policarbonato'));
                
                step6.innerHTML = `
                    <h3>√çndice de Refra√ß√£o para Zeiss Kids:</h3>
                    <div class="options-grid">
                        <div class="option-card" onclick="selectIndiceRefracao('${poliOption.name}')">
                            <span class="badge ${poliOption.badgeClass}">${poliOption.name.split(' ')[0]}</span>
                            <img src="${poliOption.img}" alt="${poliOption.name}">
                            <h4>${poliOption.name}</h4>
                            <p>${poliOption.desc}</p>
                        </div>
                    </div>
                    <div class="navigation-buttons">
                        <button class="back-button" onclick="goBack()">Voltar</button>
                    </div>
                `;
            }
            // Se for Zeiss Myocare, mostrar Poli e Alto √çndice
            else if (currentSelection.versao === 'Zeiss Myocare') {
                const allowedOptions = options['indice-refracao'].filter(item => 
                    item.name.includes('Policarbonato') || item.name.includes('Alto √çndice')
                );
                
                step6.innerHTML = `
                    <h3>√çndice de Refra√ß√£o para Myocare:</h3>
                    <div class="options-grid">
                        ${allowedOptions.map(item => `
                            <div class="option-card" onclick="selectIndiceRefracao('${item.name}')">
                                <div class="badge-container">
    <span class="badge ${item.badgeClass}">${item.name.split(' ')[0]}</span>
    <img src="${item.img}" alt="${item.name}">
 </div>
                                <h4>${item.name}</h4>
                                <p>${item.desc}</p>
                            </div>
                        `).join('')}
                    </div>
                    <div class="navigation-buttons">
                        <button class="back-button" onclick="goBack()">Voltar</button>
                    </div>
                `;
            } else {
                // Mostrar todas as op√ß√µes normalmente
                step6.innerHTML = `
                    <h3>Escolha o √çndice de Refra√ß√£o:</h3>
                    <div class="options-grid">
                        ${options['indice-refracao'].map(item => `
                            <div class="option-card" onclick="selectIndiceRefracao('${item.name}')">
                                <div class="badge-container">
                                  <span class="badge ${item.badgeClass}">${item.name.split(' ')[0]}</span>
                                    <img src="${item.img}" alt="${item.name}">
                                </div>
                                <h4>${item.name}</h4>
                                <p>${item.desc}</p>
                            </div>
                        `).join('')}
                    </div>
                    <div class="navigation-buttons">
                        <button class="back-button" onclick="goBack()">Voltar</button>
                    </div>
                `;
            }
            
            navigateTo('step6');
        }

        function selectIndiceRefracao(indice) {
            currentSelection.indiceRefracao = indice;
            
            // Pular etapa de fotossens√≠vel para Myocare, Myocare Pronta ou ClearView com Poli
            if (currentSelection.versao === 'Zeiss Myocare' || 
                currentSelection.versao === 'Lente Pronta Myocare' ||
                currentSelection.versao === 'Zeiss Kids' ||
                (currentSelection.versao === 'Lente Pronta Zeiss ClearView' && indice.includes('Policarbonato'))) {
                showAntirreflexoSelection();
            } else {
                showFotossensivelSelection();
            }
        }

        function showFotossensivelSelection() {
            const step7 = document.getElementById('step7');
            
            if (!options[currentSelection.category] || !options[currentSelection.category].fotossensivel) {
                console.error("Op√ß√µes de fotossens√≠vel n√£o definidas para esta categoria:", currentSelection.category);
                return;
            }

            // Alterar o nome para "PhotoFusion X" nas categorias Freeform
            const title = (currentSelection.type === 'Freeform') ? 'PhotoFusion X' : 'Fotossens√≠vel';

            step7.innerHTML = `
                <h3>Tratamento ${title}:</h3>
                <div class="options-grid">
                    ${options[currentSelection.category].fotossensivel.map(opt => `
                        <div class="option-card" onclick="selectFotossensivel('${opt}')">
                            <img src="${opt === 'Sim' ? 'pictures/fotossensivel-sim.png' : 'pictures/fotossensivel-nao.png'}" alt="${opt}">
                            <h4>${opt}</h4>
                            <p>${opt === 'Sim' ? 'Lentes que escurecem automaticamente ao sol.' : 'Lentes sem altera√ß√£o ao sol.'}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step7');
        }

        function selectFotossensivel(opt) {
            currentSelection.fotossensivel = opt;
            showAntirreflexoSelection();
        }

        function showAntirreflexoSelection() {
            const summary = document.getElementById('summary');
            
            let antirreflexoOptions;
            
            // Verifica se √© uma lente pronta Myocare ou Zeiss Kids
            if (currentSelection.versao === 'Lente Pronta Myocare' || currentSelection.versao === 'Zeiss Kids') {
                antirreflexoOptions = ['Duravision Platinum'];
            } 
            // Verifica se √© Zeiss Myocare
            else if (currentSelection.versao === 'Zeiss Myocare') {
                antirreflexoOptions = ['Duravision Platinum'];
            }
            // Verifica se √© ClearView
            else if (currentSelection.versao === 'Lente Pronta Zeiss ClearView') {
                // Remover "Sem Antirreflexo" conforme solicitado
                antirreflexoOptions = ['Duravision Chrome', 'Duravision Silver', 'Duravision Platinum'];
                
                // Se fotossens√≠vel for 'Sim' e for Policarbonato, manter Silver (nova regra)
                if (currentSelection.fotossensivel === 'Sim' && currentSelection.indiceRefracao.includes('Policarbonato')) {
                    // Manter Silver para Poli mesmo com PhotoFusion
                } else if (currentSelection.fotossensivel === 'Sim') {
                    // Remover Silver apenas se n√£o for Poli
                    antirreflexoOptions = antirreflexoOptions.filter(opt => opt !== 'Duravision Silver');
                }
            }
            // Verifica se √© Freeform (vis√£o simples ou multifocal)
            else if (currentSelection.type === 'Freeform' && 
                    (currentSelection.category === 'visao-simples' || currentSelection.category === 'multifocais')) {
                antirreflexoOptions = options[currentSelection.category].antirreflexo['Freeform'];
            } 
            // Para todas as outras op√ß√µes (convencionais, digitais e bifocais)
            else {
                if (currentSelection.category === 'multifocais') {
                    antirreflexoOptions = options.multifocais.antirreflexo[currentSelection.type] || 
                                         options.multifocais.antirreflexo['Convencional'];
                } else if (currentSelection.category === 'bifocais') {
                    antirreflexoOptions = options.bifocais.antirreflexo;
                } else {
                    antirreflexoOptions = options['visao-simples'].antirreflexo[currentSelection.type] || 
                                         options['visao-simples'].antirreflexo['Convencional'];
                }
            }

            summary.innerHTML = `
                <h3>Tratamento Antirreflexo:</h3>
                <div class="options-grid">
                    ${antirreflexoOptions.map(opt => `
                        <div class="option-card" onclick="selectAntirreflexo('${opt}')">
                            <img src="${getAntirreflexoImage(opt)}" alt="${opt}">
                            <h4>${opt}</h4>
                            <p>${getAntirreflexoDescription(opt)}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('summary');
        }

        function getAntirreflexoImage(opt) {
            switch (opt) {
                case 'Anti Reflexo Verde': return 'pictures/arverde.png';
                case 'Anti Reflexo Azul': return 'pictures/arazul.png';
                case 'Colora√ß√£o': return 'pictures/coloracao.png';
                case 'Duravision Chrome': return 'pictures/duravision-chrome.png';
                case 'Duravision Silver': return 'pictures/duravision-silver.png';
                case 'Duravision Platinum': return 'pictures/duravision-platinum.png';
                case 'Sem Antirreflexo': return 'pictures/sem-antirreflexo.png';
                default: return 'pictures/default.png';
            }
        }

        function getAntirreflexoDescription(opt) {
            switch (opt) {
                case 'Sem Antirreflexo': return 'Sem tratamento adicional.';
                case 'Anti Reflexo Verde': return 'Prote√ß√£o contra reflexos e luz intensa.';
                case 'Anti Reflexo Azul': return 'Prote√ß√£o contra a luz azul nociva.';
                case 'Colora√ß√£o': return 'Lentes com colora√ß√£o para prote√ß√£o solar.';
                case 'Duravision Chrome': return 'Se voc√™ n√£o se incomoda com uma tonalidade esverdeada, adquira os recursos DuraVision padr√£o por um valor um pouco menor.';
                case 'Duravision Silver': return 'Vis√£o totalmente n√≠tida e assinatura ZEISS de tonalidade azul sutil. N√£o t√£o r√≠gido quanto nosso tratamento DuraVision¬Æ Platinum.';
                case 'Duravision Platinum': return 'Nosso tratamento antirreflexo de lente mais robusto com apenas um reflexo azul muito discreto, para lentes incolores, mais resistentes do que parecem.';
                default: return 'Descri√ß√£o n√£o dispon√≠vel.';
            }
        }

        function selectAntirreflexo(opt) {
            currentSelection.antirreflexo = opt;
            showFinalSummary();
        }

        function showFinalSummary() {
            const summary = document.getElementById('summary');
            let whatsappMessage = `*Pedido de Lentes - √ìticas Diniz*\n\n`;
            whatsappMessage += `*Cliente:* ${currentSelection.clientName}\n`;
            whatsappMessage += `*Categoria:* ${currentSelection.category.replace('-', ' ').toUpperCase()}\n`;
            whatsappMessage += `*Tipo:* ${currentSelection.type}\n`;
            if (currentSelection.versao) whatsappMessage += `*Vers√£o:* ${currentSelection.versao}\n`;
            if (currentSelection.bifocalCategory) whatsappMessage += `*Categoria Bifocal:* ${currentSelection.bifocalCategory}\n`;
            whatsappMessage += `*√çndice de Refra√ß√£o:* ${currentSelection.indiceRefracao}\n`;
            
            // Mostrar fotossens√≠vel apenas se n√£o for Myocare, Kids ou ClearView com Poli
            if (!(currentSelection.versao === 'Zeiss Myocare' || 
                  currentSelection.versao === 'Lente Pronta Myocare' ||
                  currentSelection.versao === 'Zeiss Kids' ||
                  (currentSelection.versao === 'Lente Pronta Zeiss ClearView' && currentSelection.indiceRefracao.includes('Policarbonato')))) {
                // Usar "PhotoFusion X" para Freeform
                const label = (currentSelection.type === 'Freeform') ? 'PhotoFusion X' : 'Fotossens√≠vel';
                whatsappMessage += `*${label}:* ${currentSelection.fotossensivel}\n`;
            }
            
            whatsappMessage += `*Antirreflexo:* ${currentSelection.antirreflexo}\n`;
            
            if (currentSelection.receitaMedica === 'N√£o') {
                whatsappMessage += `\n*Observa√ß√£o:* O cliente n√£o possui receita m√©dica e deseja agendar uma consulta.\n`;
            }

            const observations = document.getElementById('observations')?.value || '';
            if (observations) {
                whatsappMessage += `\n*Observa√ß√µes Adicionais:*\n${observations}\n`;
            }

            // Mostrar sele√ß√£o de loja
            summary.innerHTML = `
                <h3>Resumo Final da Sua Escolha:</h3>
                <p><strong>Cliente:</strong> ${currentSelection.clientName}</p>
                <p><strong>Categoria:</strong> ${currentSelection.category.replace('-', ' ').toUpperCase()}</p>
                <p><strong>Tipo:</strong> ${currentSelection.type}</p>
                ${currentSelection.versao ? `<p><strong>Vers√£o:</strong> ${currentSelection.versao}</p>` : ''}
                ${currentSelection.bifocalCategory ? `<p><strong>Categoria Bifocal:</strong> ${currentSelection.bifocalCategory}</p>` : ''}
                <p><strong>√çndice de Refra√ß√£o:</strong> ${currentSelection.indiceRefracao}</p>
                
                ${!(currentSelection.versao === 'Zeiss Myocare' || 
                   currentSelection.versao === 'Lente Pronta Myocare' ||
                   currentSelection.versao === 'Zeiss Kids' ||
                   (currentSelection.versao === 'Lente Pronta Zeiss ClearView' && currentSelection.indiceRefracao.includes('Policarbonato'))) ? 
                   `<p><strong>${currentSelection.type === 'Freeform' ? 'PhotoFusion X' : 'Fotossens√≠vel'}:</strong> ${currentSelection.fotossensivel}</p>` : ''}
                
                <p><strong>Antirreflexo:</strong> ${currentSelection.antirreflexo}</p>
                
                <div class="observations">
                    <label for="observations">Observa√ß√µes (opcional):</label>
                    <textarea id="observations" placeholder="Adicione observa√ß√µes, se necess√°rio"></textarea>
                </div>

                <h3 style="margin-top: 30px;">Selecione a Loja para Enviar:</h3>
                <div class="lojas-grid" id="lojas-container">
                    ${lojas.map(loja => `
                        <div class="loja-card" onclick="selectLojaFinal(${lojas.indexOf(loja)})">
                            <img src="${loja.img}" alt="${loja.nome}">
                            <h4>${loja.nome}</h4>
                            <p>Clique para selecionar</p>
                        </div>
                    `).join('')}
                </div>

                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                    <button onclick="init()">Reiniciar</button>
                </div>
                <div id="whatsapp-button-container" style="display: none; text-align: center; margin-top: 20px;">
                    <a href="#" class="whatsapp-button" target="_blank" id="whatsapp-link">Enviar Pedido para a Loja</a>
                </div>
            `;

            document.getElementById('observations').addEventListener('input', function() {
                const updatedMessage = whatsappMessage + (this.value ? `\n\n*Observa√ß√µes Adicionais:*\n${this.value}` : '');
                if (currentSelection.selectedLoja) {
                    document.getElementById('whatsapp-link').href = `https://wa.me/55${currentSelection.selectedLoja.whatsapp}?text=${encodeURIComponent(updatedMessage)}`;
                }
            });
        }

        function selectLojaFinal(index) {
            currentSelection.selectedLoja = lojas[index];
            
            // Remover sele√ß√£o de todas as lojas
            document.querySelectorAll('.loja-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Adicionar sele√ß√£o √† loja escolhida
            document.querySelectorAll('.loja-card')[index].classList.add('selected');
            
            // Atualizar link do WhatsApp
            let whatsappMessage = `*Pedido de Lentes - √ìticas Diniz*\n\n`;
            whatsappMessage += `*Cliente:* ${currentSelection.clientName}\n`;
            whatsappMessage += `*Categoria:* ${currentSelection.category.replace('-', ' ').toUpperCase()}\n`;
            whatsappMessage += `*Tipo:* ${currentSelection.type}\n`;
            if (currentSelection.versao) whatsappMessage += `*Vers√£o:* ${currentSelection.versao}\n`;
            if (currentSelection.bifocalCategory) whatsappMessage += `*Categoria Bifocal:* ${currentSelection.bifocalCategory}\n`;
            whatsappMessage += `*√çndice de Refra√ß√£o:* ${currentSelection.indiceRefracao}\n`;
            
            // Mostrar fotossens√≠vel apenas se n√£o for Myocare, Kids ou ClearView com Poli
            if (!(currentSelection.versao === 'Zeiss Myocare' || 
                  currentSelection.versao === 'Lente Pronta Myocare' ||
                  currentSelection.versao === 'Zeiss Kids' ||
                  (currentSelection.versao === 'Lente Pronta Zeiss ClearView' && currentSelection.indiceRefracao.includes('Policarbonato')))) {
                // Usar "PhotoFusion X" para Freeform
                const label = (currentSelection.type === 'Freeform') ? 'PhotoFusion X' : 'Fotossens√≠vel';
                whatsappMessage += `*${label}:* ${currentSelection.fotossensivel}\n`;
            }
            
            whatsappMessage += `*Antirreflexo:* ${currentSelection.antirreflexo}\n`;
            
            if (currentSelection.receitaMedica === 'N√£o') {
                whatsappMessage += `\n*Observa√ß√£o:* O cliente n√£o possui receita m√©dica e deseja agendar uma consulta.\n`;
            }

            const observations = document.getElementById('observations').value || '';
            if (observations) {
                whatsappMessage += `\n*Observa√ß√µes Adicionais:*\n${observations}\n`;
            }

            const whatsappLink = `https://wa.me/55${currentSelection.selectedLoja.whatsapp}?text=${encodeURIComponent(whatsappMessage)}`;
            
            document.getElementById('whatsapp-link').href = whatsappLink;
            document.getElementById('whatsapp-button-container').style.display = 'block';
        }

        function init() {
            currentSelection = {
                category: '',
                type: '',
                versao: '',
                indiceRefracao: '',
                fotossensivel: '',
                antirreflexo: '',
                bifocalCategory: '',
                clientName: '',
                receitaMedica: '',
                selectedLoja: null
            };
            currentStepHistory = ['home-step'];
            navigateTo('home-step');
        }

        // Inicializa o sistema
        init();
    </script>
</body>
</html>
